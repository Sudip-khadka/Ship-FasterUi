import{r as o,b as k}from"./index-2yJIXLcc.js";import{P as L,d as j}from"./index-B8lP-kFZ.js";import{u as D}from"./index-Bro3k9ay.js";import{j as A}from"./jsx-runtime-D_zvdyIk.js";import{G as z}from"./index-D-es_Zdh.js";function R(t,e,{checkForDefaultPrevented:s=!0}={}){return function(r){if(t==null||t(r),s===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function p(t){const e=o.useRef(t);return o.useEffect(()=>{e.current=t}),o.useMemo(()=>(...s)=>{var n;return(n=e.current)==null?void 0:n.call(e,...s)},[])}function fe({prop:t,defaultProp:e,onChange:s=()=>{}}){const[n,r]=G({defaultProp:e,onChange:s}),a=t!==void 0,l=a?t:n,u=p(s),f=o.useCallback(i=>{if(a){const v=typeof i=="function"?i(t):i;v!==t&&u(v)}else r(i)},[a,t,r,u]);return[l,f]}function G({defaultProp:t,onChange:e}){const s=o.useState(t),[n]=s,r=o.useRef(n),a=p(e);return o.useEffect(()=>{r.current!==n&&(a(n),r.current=n)},[n,r,a]),s}function K(t,e=globalThis==null?void 0:globalThis.document){const s=p(t);o.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var X="DismissableLayer",C="dismissableLayer.update",Y="dismissableLayer.pointerDownOutside",$="dismissableLayer.focusOutside",I,x=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...f}=t,i=o.useContext(x),[c,v]=o.useState(null),m=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=o.useState({}),N=D(e,d=>v(d)),h=Array.from(i.layers),[O]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),F=h.indexOf(O),T=c?h.indexOf(c):-1,B=i.layersWithOutsidePointerEventsDisabled.size>0,w=T>=F,_=V(d=>{const y=d.target,M=[...i.branches].some(g=>g.contains(y));!w||M||(r==null||r(d),l==null||l(d),d.defaultPrevented||u==null||u())},m),S=Z(d=>{const y=d.target;[...i.branches].some(g=>g.contains(y))||(a==null||a(d),l==null||l(d),d.defaultPrevented||u==null||u())},m);return K(d=>{T===i.layers.size-1&&(n==null||n(d),!d.defaultPrevented&&u&&(d.preventDefault(),u()))},m),o.useEffect(()=>{if(c)return s&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(I=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(c)),i.layers.add(c),U(),()=>{s&&i.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=I)}},[c,m,s,i]),o.useEffect(()=>()=>{c&&(i.layers.delete(c),i.layersWithOutsidePointerEventsDisabled.delete(c),U())},[c,i]),o.useEffect(()=>{const d=()=>E({});return document.addEventListener(C,d),()=>document.removeEventListener(C,d)},[]),A.jsx(L.div,{...f,ref:N,style:{pointerEvents:B?w?"auto":"none":void 0,...t.style},onFocusCapture:R(t.onFocusCapture,S.onFocusCapture),onBlurCapture:R(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:R(t.onPointerDownCapture,_.onPointerDownCapture)})});q.displayName=X;var J="DismissableLayerBranch",Q=o.forwardRef((t,e)=>{const s=o.useContext(x),n=o.useRef(null),r=D(e,n);return o.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),A.jsx(L.div,{...t,ref:r})});Q.displayName=J;function V(t,e=globalThis==null?void 0:globalThis.document){const s=p(t),n=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const a=u=>{if(u.target&&!n.current){let f=function(){W(Y,s,i,{discrete:!0})};const i={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=f,e.addEventListener("click",r.current,{once:!0})):f()}else e.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function Z(t,e=globalThis==null?void 0:globalThis.document){const s=p(t),n=o.useRef(!1);return o.useEffect(()=>{const r=a=>{a.target&&!n.current&&W($,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function U(){const t=new CustomEvent(C);document.dispatchEvent(t)}function W(t,e,s,{discrete:n}){const r=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?j(r,a):r.dispatchEvent(a)}var b=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{},H=k.useId||(()=>{}),ee=0;function me(t){const[e,s]=o.useState(H());return b(()=>{s(n=>n??String(ee++))},[t]),t||(e?`radix-${e}`:"")}var te="Portal",ne=o.forwardRef((t,e)=>{var u;const{container:s,...n}=t,[r,a]=o.useState(!1);b(()=>a(!0),[]);const l=s||r&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?z.createPortal(A.jsx(L.div,{...n,ref:e}),l):null});ne.displayName=te;function se(t,e){return o.useReducer((s,n)=>e[s][n]??s,t)}var re=t=>{const{present:e,children:s}=t,n=oe(e),r=typeof s=="function"?s({present:n.isPresent}):o.Children.only(s),a=D(n.ref,ie(r));return typeof s=="function"||n.isPresent?o.cloneElement(r,{ref:a}):null};re.displayName="Presence";function oe(t){const[e,s]=o.useState(),n=o.useRef({}),r=o.useRef(t),a=o.useRef("none"),l=t?"mounted":"unmounted",[u,f]=se(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const i=P(n.current);a.current=u==="mounted"?i:"none"},[u]),b(()=>{const i=n.current,c=r.current;if(c!==t){const m=a.current,E=P(i);t?f("MOUNT"):E==="none"||(i==null?void 0:i.display)==="none"?f("UNMOUNT"):f(c&&m!==E?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,f]),b(()=>{if(e){let i;const c=e.ownerDocument.defaultView??window,v=E=>{const h=P(n.current).includes(E.animationName);if(E.target===e&&h&&(f("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",i=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},m=E=>{E.target===e&&(a.current=P(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{c.clearTimeout(i),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:o.useCallback(i=>{i&&(n.current=getComputedStyle(i)),s(i)},[])}}function P(t){return(t==null?void 0:t.animationName)||"none"}function ie(t){var n,r;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}export{q as D,re as P,fe as a,ne as b,R as c,p as d,b as e,me as u};
